// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
}

enum Role {
  INFLUENCER
  BUSINESS
  ADMIN
}

enum Industry {
  BEAUTY_PERSONAL_CARE
  FASHION_STYLE
  HEALTH_WELLNESS
  LIFESTYLE
  FOOD_DRINK
  TRAVEL_HOSPITALITY
  PARENTING_FAMILY
  TECH_DIGITAL
  EDUCATION_KNOWLEDGE
  BUSINESS_ENTREPRENEURSHIP
  FINANCE_INVESTING
  GAMING_ESPORTS
  ENTERTAINMENT_MEDIA
  ART_CREATIVITY
  SPORTS
  SUSTAINABILITY_ETHICS
  PETS_ANIMALS
  AUTOMOTIVE_MOBILITY
  HOME_REAL_ESTATE
}

enum Value {
  AUTHENTICITY
  TRANSPARENCY
  QUALITY
  HONESTY
  PROFESSIONALISM
  CREATIVITY
  EDUCATION
  KNOWLEDGE_SHARING
  SUSTAINABILITY
  ETHICS
  RESPONSIBILITY
  MENTAL_HEALTH_BALANCE
  SELF_CONFIDENCE
  PERSONAL_GROWTH
  INCLUSIVITY
  DIVERSITY
  BODY_POSITIVITY
  NATURAL_BEAUTY
  INNOVATION
  LONG_TERM_PARTNERSHIPS
  COMMUNITY
  SUPPORT
  COMMITMENT
  CONSISTENCY
  SOCIAL_RESPONSIBILITY
  WORK_LIFE_BALANCE
  PREMIUM_STANDARDS
  ACCESSIBILITY
  SUPPORTING_LOCAL_BRANDS
  EMPATHY
}

enum PostAction {
  LIKE
  SAVE
}

model User {
  id          Int   @id @default(autoincrement())
  email       String   @unique
  password    String
  role        Role

  influencer  Influencer?
  business    Business?
  reviews     Review[]        @relation("ReviewedUser")
  reviewsGiven Review[]       @relation("ReviewerUser")
}

model Influencer {
  userId         Int  @id
  user           User    @relation(fields: [userId], references: [id], onDelete: Cascade)
  name           String
  experience     Int?
  isPrivate      Boolean  @default(true)
  industries     Industry[]
  values         Value[]
  profilePicture String?
  coverPhoto     String?
  description    String?
  
  nametag       String?  @unique
  contactMail   String[]
  contactPhone  String[]
  links         String[]
  
  post       Post[]
  comments   Comment[]
  interactions PostInteraction[]

  isDeleted    Boolean? @default(false)
}

model Post {
  id          Int   @id @default(autoincrement())
  userId      Int 
  user        Influencer    @relation(fields: [userId], references: [userId], onDelete: Cascade)
  text        String?
  images      String[]
  createdAt   DateTime
  updatedAt   DateTime?

  comments   Comment[]
  interactions PostInteraction[]

}

model Business {
  userId         Int  @id
  business       User @relation(fields: [userId], references: [id], onDelete: Cascade)
  name           String
}

model Comment {
  id          Int           @id @default(autoincrement())
  postId      Int
  post        Post          @relation(fields: [postId], references: [id], onDelete: Cascade)
  userId      Int 
  user        Influencer    @relation(fields: [userId], references: [userId], onDelete: Cascade)
  content     String
  createdAt   DateTime
}

model PostInteraction {
  id          Int           @id @default(autoincrement())
  userId      Int 
  user        Influencer    @relation(fields: [userId], references: [userId], onDelete: Cascade)
  postId      Int
  post        Post          @relation(fields: [postId], references: [id], onDelete: Cascade)
  action      PostAction
}

model Review { 
  id           Int @id @default(autoincrement()) 
  userId       Int 
  user         User @relation("ReviewedUser", fields: [userId], references: [id], onDelete: Cascade) 
  reviewerId   Int 
  reviewer     User @relation("ReviewerUser", fields: [reviewerId], references: [id], onDelete: Cascade) 
  rating       Int 
  comment      String 
  createdAt    DateTime 
}